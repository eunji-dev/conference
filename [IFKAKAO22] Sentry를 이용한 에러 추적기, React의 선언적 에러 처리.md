# [IFKAKAO22] Sentry를 이용한 에러 추적기, React의 선언적 에러 처리

> https://www.youtube.com/watch?v=012IPbMX_y4

<br>

## 소감

```
error boundary와 axios interceptor의 역할 차이에 대해 생각해볼 수 있었다.
```

<br>

## Action Item

```
로컬 에러바운더리를 작성해보기
```

<br>

---

<br>

## 내용정리

<br>

### 센트리 <br>

이슈 발생 과정 볼수있음<br>
시각화 도구로 분석<br>
에러 데이터 쌓기<br>
scope단위로 데이터 관리<br>
태그 -> 인덱싱 가능, 이슈 트래킹에 사용<br>

**_유의미한 데이터를 수집하기_**

<br>

## 에러데이터 분석하기

에러 수집전 가설

1. 화면 에러는 발생안할것이다.
2. Api데이터에서 에러가 발생했을것이다.

<br>

## 센트리 에러 추적 개선 이후 좋아진점

- 브라우저 버전/ 빌드 설정 등의 문제로 발생한 에러 발견 및 해결 (폴리필 적용)

- 장애 탐지 시간/ 원인파악/ 해결 시간 줄음<br>

=> CS 인입시 에러 원인을 빨리 파악하고 정확하게 안내할수있음
=> 개발자 경험이 좋아짐

<br>

## 기존 axios 인터셉터 에러 처리

axios interceptor로 전역적으로 에러 처리<br>
=> 부분적으로 에러 예외처리를 하기 어려움<br>
=> 에러 화면을 보여주기위해 라우트 이동을 해야함

<br>

## 개선 리액트 에러바운더리 적용

=> Fallback ui 적용
=> 선언적으로 에러처리

<br>

## 명령형/선언형

명령 : 어떻게? 원하는 결과에 도달할지 => 과정 위주<br>
선언 : 무엇을? 바꿀지 => 결과 위주<br>

<br>

리액트의 에러 바운더리는 이벤트 핸들러의 에러를 포착하지 않음<br>
React-Query에서는 `useErrorBoundary` 옵션을 제공해서 에러를 캐치함

에러 바운더리의 관심사 분리 : api 에러/ 그외 프론트 영역 에러로 분리

<br>

## 에러처리 개선후 좋아진점

선언형으로 변경이후 비즈니스 로직에 집중할수있는 에러처리<br>
UI 일부 에러를 전역으로 전파시키지 않을수있음<br>
다만 전역에서 처리해야할 에러는 구분해야함<br>
